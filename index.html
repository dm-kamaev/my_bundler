<!DOCTYPE html>
<html lang='RU'>
<head>
  <meta charset='UTF-8'>
  <title>Loader modules</title>
</head>
<body>
  <div id='log'>

  </div>
  <script src='./loader.js'></script>
  <script>

var MODULES;

fetch('description_modules.json')
  .then(response => response.json())
  .then(MODULES => {
    console.log(MODULES);

    var loader = window.loader;

    loader.set_settings({
      modules: MODULES.modules,
      prefix_url: './stat',
      prefix_for_vesrion: 'a',
    });

    loader.require([ '/j/app_interface_reports_to_xlsx/app_interface_reports_to_xlsx.js', '/j/app_interface_select_report/app_interface_select_report.js', '/j/base/fn.js' ], function () {
      var fn = loader.get('/j/base/fn.js');
      var app_interface_select_report = loader.get('/j/app_interface_select_report/app_interface_select_report.js');

      write_log('MAIN: fn.map = ' + fn.map);

      app_interface_select_report.start();
    });
  });





function write_log(str) {
  var $log = document.createElement('div');
  $log.innerHTML = str;
  $log.style = 'margin-top:20px';
  document.getElementById('log').appendChild($log);
}

// loader.require_list([ '/j/app_interface_reports_to_xlsx/app_interface_reports_to_xlsx1.js', '/j/app_interface_select_report/app_interface_select_report.js' ], function () {
//   console.log('LOADED ALL');
// });

// loader.require('/j/app_interface_reports_to_xlsx/app_interface_reports_to_xlsx.js', function () {
//   console.log('script.onload');
//   loader.require('/j/app_interface_select_report/app_interface_select_report.js', function () {
//     console.log('script.onload');
//     loader.require('/j/app_interface_select_report/app_interface_select_report.js', function () {
//       console.log('script.onload');
//     });
//   });
// });
  </script>
</body>
</html>